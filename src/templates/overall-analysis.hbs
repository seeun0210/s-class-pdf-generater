<!-- src/pdf/templates/overall-analysis.hbs -->
<html lang='ko'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Ï¢ÖÌï© Î∂ÑÏÑù Î≥¥Í≥†ÏÑú</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Noto Sans KR', sans-serif;
        line-height: 1.8;
        color: #000;
        margin: 0;
        padding: 40px;
        background-color: #ffffff;
        font-size: 14px;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 3px solid #333;
      }

      .header-title {
        font-size: 24px;
        font-weight: 700;
        color: #000;
        margin-bottom: 10px;
      }

      .header-subtitle {
        font-size: 16px;
        color: #666;
        font-weight: 500;
      }

      .header-date {
        font-size: 14px;
        color: #999;
        margin-top: 8px;
      }

      .section {
        margin-bottom: 40px;
        page-break-inside: avoid;
      }

      .section-title {
        font-size: 20px;
        font-weight: 700;
        color: #000;
        margin-bottom: 25px;
        padding-bottom: 12px;
        border-bottom: 2px solid #333;
        position: relative;
      }

      .section-title::before {
        content: 'üìä';
        margin-right: 10px;
      }

      /* ÌïôÏÉù ÌîÑÎ°úÌïÑ Ïπ¥Îìú */
      .profile-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 10px;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .profile-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .profile-item {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 8px;
        backdrop-filter: blur(10px);
      }

      .profile-item-label {
        font-size: 13px;
        opacity: 0.9;
        margin-bottom: 8px;
      }

      .profile-item-value {
        font-size: 16px;
        font-weight: 600;
      }

      /* Ïó≠Îüâ ÏÑπÏÖò */
      .competency-card {
        background-color: #f9f9f9;
        border-left: 5px solid #4a90e2;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .competency-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .competency-name {
        font-size: 17px;
        font-weight: 700;
        color: #000;
      }

      .competency-level {
        background-color: #e3f2fd;
        color: #1976d2;
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
      }

      .competency-description {
        font-size: 14px;
        color: #444;
        line-height: 1.8;
        margin-bottom: 12px;
      }

      .evidence-list {
        background-color: #fff9e6;
        padding: 12px 15px;
        border-radius: 5px;
        border-left: 3px solid #ffd700;
      }

      .evidence-item {
        font-size: 13px;
        line-height: 1.7;
        padding-left: 18px;
        margin-bottom: 5px;
        position: relative;
      }

      .evidence-item::before {
        content: '‚úì';
        position: absolute;
        left: 0;
        color: #4a90e2;
        font-weight: 700;
      }

      /* ÏÑ±Ïû• ÏòÅÏó≠ */
      .growth-card {
        background-color: #f0f8f0;
        border-left: 5px solid #66bb6a;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .growth-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .growth-area {
        font-size: 17px;
        font-weight: 700;
        color: #000;
      }

      .level-progress {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 13px;
        color: #666;
      }

      .level-bar {
        flex: 1;
        height: 8px;
        background-color: #e0e0e0;
        border-radius: 4px;
        overflow: hidden;
      }

      .level-fill {
        height: 100%;
        background: linear-gradient(90deg, #66bb6a 0%, #4caf50 100%);
        transition: width 0.3s ease;
      }

      .growth-description {
        font-size: 14px;
        color: #444;
        line-height: 1.8;
        margin-bottom: 12px;
      }

      .action-items {
        background-color: #fff9e6;
        padding: 12px 15px;
        border-radius: 5px;
        border-left: 3px solid #ffa726;
      }

      .action-item {
        font-size: 13px;
        line-height: 1.7;
        padding-left: 18px;
        margin-bottom: 5px;
        position: relative;
      }

      .action-item::before {
        content: '‚Üí';
        position: absolute;
        left: 0;
        color: #ff9800;
        font-weight: 700;
      }

      /* Ï∂îÏ≤úÏÇ¨Ìï≠ */
      .recommendation-card {
        background-color: #f9f9f9;
        border-left: 5px solid #ab47bc;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .recommendation-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 12px;
      }

      .recommendation-title {
        font-size: 17px;
        font-weight: 700;
        color: #000;
        flex: 1;
      }

      .recommendation-category {
        background-color: #e1bee7;
        color: #6a1b9a;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
        margin-left: 10px;
      }

      .priority-badge {
        background-color: #ffecb3;
        color: #f57c00;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
      }

      .recommendation-description {
        font-size: 14px;
        color: #444;
        line-height: 1.8;
        margin-bottom: 12px;
      }

      .action-steps {
        background-color: #f3e5f5;
        padding: 12px 15px;
        border-radius: 5px;
        border-left: 3px solid #ab47bc;
      }

      .action-step {
        font-size: 13px;
        line-height: 1.7;
        padding-left: 18px;
        margin-bottom: 5px;
        position: relative;
      }

      .action-step::before {
        content: '‚Ä¢';
        position: absolute;
        left: 0;
        color: #ab47bc;
        font-weight: 700;
        font-size: 16px;
      }

      /* Ï¢ÖÌï© Í≤∞Î°† */
      .conclusion-section {
        background-color: #f9f9f9;
        padding: 30px;
        border-radius: 10px;
        border-left: 5px solid #333;
        margin-top: 30px;
        page-break-inside: avoid;
      }

      .conclusion-title {
        font-size: 20px;
        font-weight: 700;
        color: #000;
        margin-bottom: 20px;
        text-align: center;
      }

      .conclusion-content {
        white-space: pre-wrap;
        font-size: 15px;
        line-height: 2;
        color: #000;
        margin-bottom: 25px;
      }

      .strengths-list,
      .development-list,
      .future-direction {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 15px;
      }

      .strengths-list {
        border-left: 4px solid #4caf50;
      }

      .development-list {
        border-left: 4px solid #ff9800;
      }

      .future-direction {
        border-left: 4px solid #2196f3;
      }

      .list-section-title {
        font-size: 16px;
        font-weight: 600;
        color: #333;
        margin-bottom: 12px;
      }

      .list-item {
        font-size: 14px;
        line-height: 1.8;
        padding-left: 20px;
        margin-bottom: 8px;
        position: relative;
      }

      .strengths-list .list-item::before {
        content: '‚úì';
        position: absolute;
        left: 0;
        color: #4caf50;
        font-weight: 700;
        font-size: 16px;
      }

      .development-list .list-item::before {
        content: '‚ñ≥';
        position: absolute;
        left: 0;
        color: #ff9800;
        font-weight: 700;
        font-size: 16px;
      }

      .future-content {
        font-size: 14px;
        line-height: 1.9;
        color: #444;
      }

      .page-break {
        page-break-before: always;
      }

      @media print {
        body {
          padding: 20px;
        }

        .page-break {
          page-break-before: always;
        }

        .competency-card,
        .growth-card,
        .recommendation-card {
          page-break-inside: avoid;
        }
      }
    </style>
  </head>
  <body>
    <!-- Ìó§Îçî -->
    <div class='header'>
      <div class='header-title'>Ï¢ÖÌï© Î∂ÑÏÑù Î≥¥Í≥†ÏÑú</div>
      <div class='header-subtitle'>Overall Analysis Report</div>
      <div class='header-date'>{{generatedAt}}</div>
    </div>

    <!-- ÌïôÏÉù ÌîÑÎ°úÌïÑ -->
    {{#if student_profile}}
      <div class='section'>
        <h2 class='section-title'>ÌïôÏÉù ÌîÑÎ°úÌïÑ</h2>
        <div class='profile-card'>
          <div
            style='font-size: 18px; font-weight: 600; margin-bottom: 10px;'
          >ÌïôÏÉù ÌäπÏÑ± Î∂ÑÏÑù</div>
          <div class='profile-grid'>
            {{#if student_profile.personality_type}}
              <div class='profile-item'>
                <div class='profile-item-label'>ÏÑ±Í≤© Ïú†Ìòï</div>
                <div
                  class='profile-item-value'
                >{{student_profile.personality_type}}</div>
              </div>
            {{/if}}
            {{#if student_profile.learning_style}}
              <div class='profile-item'>
                <div class='profile-item-label'>ÌïôÏäµ Ïä§ÌÉÄÏùº</div>
                <div
                  class='profile-item-value'
                >{{student_profile.learning_style}}</div>
              </div>
            {{/if}}
            {{#if student_profile.motivation_type}}
              <div class='profile-item'>
                <div class='profile-item-label'>ÎèôÍ∏∞ Ïú†Ìòï</div>
                <div
                  class='profile-item-value'
                >{{student_profile.motivation_type}}</div>
              </div>
            {{/if}}
            {{#if student_profile.career_orientation}}
              <div class='profile-item'>
                <div class='profile-item-label'>ÏßÑÎ°ú Î∞©Ìñ•</div>
                <div
                  class='profile-item-value'
                >{{student_profile.career_orientation}}</div>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    {{/if}}

    <!-- ÌïµÏã¨ Ïó≠Îüâ -->
    {{#if core_competencies}}
      {{#if core_competencies.length}}
        <div class='section page-break'>
          <h2 class='section-title'>ÌïµÏã¨ Ïó≠Îüâ</h2>
          {{#each core_competencies}}
            <div class='competency-card'>
              <div class='competency-header'>
                <div class='competency-name'>{{competency_name}}</div>
                {{#if level}}
                  <div class='competency-level'>ÏàòÏ§Ä: {{level}}</div>
                {{/if}}
              </div>
              {{#if description}}
                <div class='competency-description'>{{description}}</div>
              {{/if}}
              {{#if evidence}}
                {{#if evidence.length}}
                  <div class='evidence-list'>
                    {{#each evidence}}
                      <div class='evidence-item'>{{this}}</div>
                    {{/each}}
                  </div>
                {{/if}}
              {{/if}}
            </div>
          {{/each}}
        </div>
      {{/if}}
    {{/if}}

    <!-- ÏÑ±Ïû• ÏòÅÏó≠ -->
    {{#if growth_areas}}
      {{#if growth_areas.length}}
        <div class='section page-break'>
          <h2 class='section-title'>ÏÑ±Ïû• ÏòÅÏó≠</h2>
          {{#each growth_areas}}
            <div class='growth-card'>
              <div class='growth-header'>
                <div class='growth-area'>{{area_name}}</div>
                {{#if current_level}}
                  {{#if target_level}}
                    <div class='level-progress'>
                      <span>{{current_level}}</span>
                      <div class='level-bar'>
                        <div
                          class='level-fill'
                          style='width: {{current_level}}%;'
                        ></div>
                      </div>
                      <span>Î™©Ìëú: {{target_level}}</span>
                    </div>
                  {{/if}}
                {{/if}}
              </div>
              {{#if description}}
                <div class='growth-description'>{{description}}</div>
              {{/if}}
              {{#if action_items}}
                {{#if action_items.length}}
                  <div class='action-items'>
                    {{#each action_items}}
                      <div class='action-item'>{{this}}</div>
                    {{/each}}
                  </div>
                {{/if}}
              {{/if}}
            </div>
          {{/each}}
        </div>
      {{/if}}
    {{/if}}

    <!-- Ï∂îÏ≤úÏÇ¨Ìï≠ -->
    {{#if recommendations}}
      {{#if recommendations.length}}
        <div class='section page-break'>
          <h2 class='section-title'>Ï∂îÏ≤úÏÇ¨Ìï≠</h2>
          {{#each recommendations}}
            <div class='recommendation-card'>
              <div class='recommendation-header'>
                <div class='recommendation-title'>{{title}}</div>
                {{#if category}}
                  <div class='recommendation-category'>{{category}}</div>
                {{/if}}
                {{#if priority}}
                  <div class='priority-badge'>Ïö∞ÏÑ†ÏàúÏúÑ: {{priority}}</div>
                {{/if}}
              </div>
              {{#if description}}
                <div class='recommendation-description'>{{description}}</div>
              {{/if}}
              {{#if action_steps}}
                {{#if action_steps.length}}
                  <div class='action-steps'>
                    {{#each action_steps}}
                      <div class='action-step'>{{this}}</div>
                    {{/each}}
                  </div>
                {{/if}}
              {{/if}}
            </div>
          {{/each}}
        </div>
      {{/if}}
    {{/if}}

    <!-- Ï¢ÖÌï© Í≤∞Î°† -->
    {{#if comprehensive_conclusion}}
      <div class='conclusion-section page-break'>
        <h2 class='conclusion-title'>Ï¢ÖÌï© Í≤∞Î°†</h2>

        {{#if comprehensive_conclusion.overall_assessment}}
          <div
            class='conclusion-content'
          >{{comprehensive_conclusion.overall_assessment}}</div>
        {{/if}}

        {{#if comprehensive_conclusion.key_strengths}}
          {{#if comprehensive_conclusion.key_strengths.length}}
            <div class='strengths-list'>
              <div class='list-section-title'>Ï£ºÏöî Í∞ïÏ†ê</div>
              {{#each comprehensive_conclusion.key_strengths}}
                <div class='list-item'>{{this}}</div>
              {{/each}}
            </div>
          {{/if}}
        {{/if}}

        {{#if comprehensive_conclusion.development_areas}}
          {{#if comprehensive_conclusion.development_areas.length}}
            <div class='development-list'>
              <div class='list-section-title'>Í∞úÎ∞ú ÏòÅÏó≠</div>
              {{#each comprehensive_conclusion.development_areas}}
                <div class='list-item'>{{this}}</div>
              {{/each}}
            </div>
          {{/if}}
        {{/if}}

        {{#if comprehensive_conclusion.future_direction}}
          <div class='future-direction'>
            <div class='list-section-title'>ÎØ∏Îûò Î∞©Ìñ•</div>
            <div
              class='future-content'
            >{{comprehensive_conclusion.future_direction}}</div>
          </div>
        {{/if}}
      </div>
    {{/if}}
  </body>
</html>